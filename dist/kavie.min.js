/*!
    Kavie - knockout observable validator
    Author: Matthew Nitschke
    License: MIT (http://www.opensource.org/licenses/mit-license.php)
    Version: 0.4.5
*/
function KavieSection(){var e=this;e.observables=[],e.children={},e.validate=!0}!function(e){e.sections={},e.isValid=function(e){for(var n=!0,i=t(e),r=0;r<i.length;r++)i[r].startValidation(),n&&i[r].hasError()&&(n=!1);return n},e.isSectionValid=function(n){var t=e.sections[n],i=!0;if(ko.unwrap(t.validate)){for(var r=Object.keys(t.children),a=0;a<r.length;a++){var o=e.isSectionValid(r[a],t.validate);i&&(i=o)}var s=e.isValid(t.observables);i&&(i=s)}else e.deactivate(t.observables);return i},e.deactivate=function(e){for(var n=t(e),i=0;i<n.length;i++)n[i].stopValidation()},e.deactivateSection=function(n){for(var t=e.sections[n],i=Object.keys(t.children),r=0;r<i.length;r++)e.deactivateSection(i[r]);e.deactivate(t.observables)},e.addVariableValidation=function(n,t){var i=e.sections[n];i||(i=e.sections[n]=new KavieSection),i.validate=t},e.addSectionChild=function(n,t){var i=e.sections[n];i||(i=e.sections[n]=new KavieSection),i.children[t]=new KavieSection};var n=function(e){return!!e.hasOwnProperty("hasError")},t=function(e){var t=[];if(e&&e.hasOwnProperty("observables")&&(e=e.observables),e)for(var i=Object.keys(e),r=0;r<i.length;r++)n(e[i[r]])&&t.push(e[i[r]]);return t};e.validatorFunctions={required:function(e,n){return!e||!(null==n||""===n)},numeric:function(e,n){return!e||!isNaN(parseFloat(n))&&isFinite(n)},max:function(e,n){return!n||n.length<=e},min:function(e,n){return!!n&&n.length>=e},matches:function(e,n){return ko.unwrap(e)==ko.unwrap(n)},date:function(e,n){return!!n&&(10==n.length&&"Invalid Date"!=new Date(n))},birthdate:function(e,n){if(!Kavie.validatorFunctions.date(e,n))return!1;var t=new Date(n);if(t>new Date)return!1;var i=new Date;return i.setFullYear(i.getFullYear()-120),!(t<i)},phone:function(e,n){return!!n.match(/^(1-?)?(\([2-9]\d{2}\)|[2-9]\d{2})-?[2-9]\d{2}-?\d{4}$/)},email:function(e,n){return!!n.match(/^(?:(?:[\w`~!#$%^&*\-=+;:{}'|,?\/]+(?:(?:\.(?:"(?:\\?[\w`~!#$%^&*\-=+;:{}'|,?\/\.()<>\[\] @]|\\"|\\\\)*"|[\w`~!#$%^&*\-=+;:{}'|,?\/]+))*\.[\w`~!#$%^&*\-=+;:{}'|,?\/]+)?)|(?:"(?:\\?[\w`~!#$%^&*\-=+;:{}'|,?\/\.()<>\[\] @]|\\"|\\\\)+"))@(?:[a-zA-Z\d\-]+(?:\.[a-zA-Z\d\-]+)*|\[\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}\])$/)},regexPattern:function(e,n){return!!n&&null!==n.toString().match(e)}}}(this.Kavie=this.Kavie||{}),ko.extenders.kavie=function(e,n){function t(n){var t=e.rules;for(key in t)for(funcKey in Kavie.validatorFunctions)if(key==funcKey){var i=Kavie.validatorFunctions[funcKey](t[key],n);if(!i)return void e.hasError(!0)}e.hasError(!1)}var i=n;return e.hasError=ko.observable(),i.section&&(Kavie.sections[i.section]||(Kavie.sections[i.section]=new KavieSection),Kavie.sections[i.section].observables.push(e),i.section=""),e.rules=i,e.startValidation=function(){e.subscription=e.subscribe(t),t(e())},e.stopValidation=function(){e.subscription&&e.subscription.dispose(),e.hasError(!1)},e};